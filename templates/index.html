<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kazmi_Creative Website Audit Tool</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
</head>
<body class="bg-light">
    <div class="container py-5">
        <div class="text-center mb-4">
            <img src="{{ url_for('static', filename='logo.png') }}" alt="Kazmi_Creative Logo" width="120">
            <h1 class="mt-3">Kazmi_Creative Website Audit</h1>
            <p class="text-muted mb-0">Analyze page speed, SEO basics, and broken links for any public URL.</p>
        </div>
        <div class="card p-4 shadow-lg">
            <form method="POST" class="form-inline">
                <div class="mb-3">
                    <label for="url" class="form-label">Enter Website URL</label>
                    <input type="url" name="url" id="url" class="form-control" placeholder="https://example.com" required>
                </div>
                <button type="submit" class="btn btn-primary btn-lg">Generate Report</button>
            </form>
        </div>

        {% if error %}
        <div class="alert alert-danger mt-4" role="alert">
            {{ error }}
        </div>
        {% endif %}

        {% if report %}
        <div class="card mt-4 shadow-sm">
            <div class="card-header bg-primary text-white">
                Audit Summary for {{ report.url }}
            </div>
            <div class="card-body">
                <h5>Page Speed</h5>
                {% if report.speed_score is not none %}
                    <p class="mb-3"><strong>Score:</strong> {{ report.speed_score }} / 100</p>
                {% else %}
                    <p class="mb-3 text-muted">PageSpeed data is not available. Configure the <code>PAGESPEED_API_KEY</code> environment variable to enable this check.</p>
                {% endif %}

                <h5>SEO Overview</h5>
                <ul class="list-unstyled">
                    <li><strong>Title:</strong> {{ report.seo_report.title }} ({{ report.seo_report.title_length }} characters)</li>
                    <li><strong>Meta Description:</strong> {{ report.seo_report.meta_description }}</li>
                    <li><strong>H1 Tags:</strong> {{ report.seo_report.h1_count }}</li>
                    <li><strong>Images Missing ALT:</strong> {{ report.seo_report.images_missing_alt }} / {{ report.seo_report.total_images }}</li>
                    <li><strong>Canonical URL:</strong> {{ report.seo_report.canonical }}</li>
                </ul>

                <h5>Broken Links</h5>
                {% if report.broken_links %}
                    <ul>
                        {% for link in report.broken_links %}
                        <li><a href="{{ link }}" target="_blank" rel="noopener">{{ link }}</a></li>
                        {% endfor %}
                    </ul>
                {% else %}
                    <p class="text-success mb-0">No broken links detected on the scanned page.</p>
                {% endif %}

                {% if pdf_filename %}
                <a class="btn btn-success mt-4" href="{{ url_for('download_report', filename=pdf_filename) }}">Download PDF Report</a>
                {% endif %}
            </div>
        </div>
        {% endif %}

        <footer class="text-center mt-5">
            <p>Contact: <a href="https://fiverr.com/kazmi_Creative" target="_blank" rel="noopener">Fiverr.com/kazmi_Creative</a> | LinkedIn: Zaigham-Abbas</p>
        </footer>
    </div>
</body>
</html>
